<!--mypage.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒšãƒ¼ã‚¸</title>
    <style>
        body { font-family: sans-serif; margin: 30px; background-color: #e6f7ff; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #1e88e5; text-align: center; }
        #user-info { 
            padding: 15px; 
            border: 1px solid #bbdefb; 
            border-left: 5px solid #1e88e5; 
            background-color: #f0f8ff; 
            border-radius: 4px; 
            margin-top: 20px;
            word-break: break-all;
            min-height: 50px; /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«é«˜ã•ã‚’ç¢ºä¿ */
        }
        #logout-btn { 
            display: block;
            width: 100%;
            padding: 12px 15px; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            background-color: #f44336; 
            color: white; 
            margin-top: 30px; 
            font-weight: bold;
        }
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

        // ã‚ãªãŸã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã®Firebaseè¨­å®š (index.htmlã¨å…±é€š)
        const firebaseConfig = {
            apiKey: "AIzaSyDt69H-dBGMB4HANbwVj007vJ3yblEZdqE",
            authDomain: "goto6234.firebaseapp.com",
            projectId: "goto6234",
            storageBucket: "goto6234.firebasestorage.app",
            messagingSenderId: "730149609843",
            appId: "1:730149609843:web:d11237de52723fc45b2506",
            measurementId: "G-FDRB7H8MRR"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const userInfoElement = document.getElementById('user-info');
        const logoutButton = document.getElementById('logout-btn');

        // èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
                userInfoElement.innerHTML = `
                    **âœ… ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ!**<br>
                    **è¡¨ç¤ºå/Email:** ${user.displayName || user.email}<br>
                    **UID:** ${user.uid}<br>
                    **ãƒ—ãƒ­ãƒã‚¤ãƒ€:** ${user.providerData[0] ? user.providerData[0].providerId : 'Email/Password'}
                `;
            } else {
                // æœªãƒ­ã‚°ã‚¤ãƒ³ãŒç¢ºå®šã—ãŸå ´åˆã®å‡¦ç†ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’é…å»¶ã•ã›ã‚‹ï¼‰
                userInfoElement.innerHTML = `
                    **ğŸš« æœªãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’æ¤œå‡ºã—ã¾ã—ãŸã€‚**<br>
                    ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†ç¢ºèªä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚
                `;
                
                // 3ç§’å¾Œã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’å®Ÿè¡Œï¼ˆå³åº§ã®èª¤ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’é˜²ãï¼‰
                setTimeout(() => {
                    alert("æœªãƒ­ã‚°ã‚¤ãƒ³ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚Šã¾ã™ã€‚");
                    window.location.href = 'index.html'; 
                }, 3000); // 3ç§’å¾Œã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            }
        });

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
        logoutButton.addEventListener('click', async () => {
            try {
                await signOut(auth);
                alert("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚");
                window.location.href = 'logout.html'; // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¾Œã€logout.htmlã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            } catch (error) {
                console.error("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:", error);
                alert("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: " + error.message);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>ã‚ˆã†ã“ãã€ãƒã‚¤ãƒšãƒ¼ã‚¸ã¸ï¼ğŸ‰</h1>
        <p id="user-info">ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç¢ºèªä¸­ã§ã™...</p>
        <button id="logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
</body>
</html>
